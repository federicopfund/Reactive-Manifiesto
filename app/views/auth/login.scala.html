@(loginForm: Form[controllers.UserLoginForm])(implicit request: RequestHeader, flash: Flash)

@main("Iniciar Sesi√≥n") {
    <div class="auth-page">
        <div class="login-container">
            <div class="login-header">
                <span class="header-icon">üîê</span>
                <h1>Reactive Manifesto</h1>
                <p>Accede a tu cuenta para continuar</p>
            </div>
            
            <div class="login-body">
                @flash.get("success").map { msg =>
                    <div class="flash-message success">@msg</div>
                }
                @flash.get("error").map { msg =>
                    <div class="flash-message error">@msg</div>
                }
                @flash.get("info").map { msg =>
                    <div class="flash-message info">@msg</div>
                }
                
                @if(loginForm.hasGlobalErrors) {
                    <div class="error">
                        @loginForm.globalErrors.map(_.message).mkString(", ")
                    </div>
                }
                
                <div class="tab-container">
                    <button type="button" class="tab active" onclick="switchTab('user')" id="userTab">
                        üë§ Usuario
                    </button>
                    <button type="button" class="tab" onclick="switchTab('admin')" id="adminTab">
                        üõ°Ô∏è Administrador
                    </button>
                </div>
                
                <form method="POST" id="loginForm">
                    @helper.CSRF.formField
                    
                    <div class="form-group">
                        <label for="username">Usuario</label>
                        <input 
                            type="text" 
                            id="username" 
                            name="username" 
                            placeholder="Ingresa tu nombre de usuario"
                            value="@loginForm("username").value.getOrElse("")"
                            required 
                            autofocus
                        >
                        @if(loginForm("username").hasErrors) {
                            <div class="error">@loginForm("username").errors.map(_.message).mkString(", ")</div>
                        }
                    </div>
                    
                    <div class="form-group">
                        <label for="password">Contrase√±a</label>
                        <input 
                            type="password" 
                            id="password" 
                            name="password" 
                            placeholder="Ingresa tu contrase√±a"
                            required
                        >
                        @if(loginForm("password").hasErrors) {
                            <div class="error">@loginForm("password").errors.map(_.message).mkString(", ")</div>
                        }
                    </div>
                    
                    <button type="submit" class="btn-login">Iniciar Sesi√≥n</button>
                </form>
                
                <div class="links">
                    <p>¬øNo tienes cuenta?</p>
                    <a href="@routes.AuthController.registerPage()">Crear cuenta nueva ‚Üí</a>
                    <span style="margin: 0 10px;">|</span>
                    <a href="@routes.HomeController.index()">Volver al inicio ‚Üí</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        const loginForm = document.getElementById('loginForm');
        let currentType = 'user';
        
        // Establecer la acci√≥n inicial del formulario
        loginForm.action = '@routes.AuthController.login()';
        
        function switchTab(type) {
            const userTab = document.getElementById('userTab');
            const adminTab = document.getElementById('adminTab');
            currentType = type;
            
            if (type === 'user') {
                userTab.classList.add('active');
                adminTab.classList.remove('active');
                loginForm.action = '@routes.AuthController.login()';
            } else {
                adminTab.classList.add('active');
                userTab.classList.remove('active');
                loginForm.action = '@routes.AdminController.login()';
            }
        }
    </script>
}
