# Production Configuration Template
# Copy this file to application.prod.conf and configure for production

include "application.conf"

# Production secret key - MUST be changed!
play.http.secret.key = ${?APPLICATION_SECRET}

# Allowed hosts in production
play.filters.hosts {
  allowed = [".yourdomain.com", "localhost"]
}

# Database Configuration for Production
slick.dbs.default {
  profile = "slick.jdbc.PostgresProfile$"
  db {
    driver = "org.postgresql.Driver"
    # Supports both DATABASE_URL (Heroku style) and DB_URL
    url = ${?DATABASE_URL}
    # Fallback to DB_URL if DATABASE_URL is not set
    url = ${?DB_URL}
    user = ${?DB_USER}
    password = ${?DB_PASSWORD}
    
    # Connection Pool settings for production
    numThreads = 20
    maxConnections = 20
    minConnections = 5
    connectionTimeout = 5000
  }
}

# Evolutions in production
play.evolutions {
  enabled = true
  autoApply = false  # Manual apply in production
  autoApplyDowns = false
}

# Akka Configuration for Production
akka {
  loglevel = "INFO"
  actor {
    default-dispatcher {
      fork-join-executor {
        parallelism-min = 8
        parallelism-factor = 3.0
        parallelism-max = 128
      }
    }
  }
}

# HTTP Configuration
# Supports both PORT (Heroku) and HTTP_PORT
play.server.http.port = ${?PORT}
# Fallback to HTTP_PORT if PORT is not set
play.server.http.port = ${?HTTP_PORT}
