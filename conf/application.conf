# Application Configuration
# ~~~~~

# Application secret key for Play Framework

play.http.secret.key = ${?APPLICATION_SECRET}

# The application languages
play.i18n.langs = [ "en", "es" ]

# Filters
play.filters.enabled += play.filters.cors.CORSFilter

# CORS Configuration
play.filters.cors {
  pathPrefixes = ["/"]
  allowedOrigins = null
  allowedHttpMethods = ["GET", "POST"]
  allowedHttpHeaders = null
}

# Akka Configuration for Reactive Manifesto
akka {
  actor {
    default-dispatcher {
      fork-join-executor {
        parallelism-min = 8
        parallelism-factor = 2.0
        parallelism-max = 64
      }
    }
  }
}
# Database Configuration
# Play JDBC Database (para los repositorios que usan JDBC directo)
#db.default.driver = "org.h2.Driver"
#db.default.url = "jdbc:h2:mem:play;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DATABASE_TO_UPPER=FALSE"
#db.default.username = "sa"
#db.default.password = ""
#db.default.logSql = true

# Connection Pool
#db.default.hikaricp.minimumIdle = 5
#db.default.hikaricp.maximumPoolSize = 10

# Slick Database (para los repositorios que usan Slick)
slick.dbs.default {
  profile = "slick.jdbc.H2Profile$"
  db {
    driver = "org.h2.Driver"
    url = "jdbc:h2:mem:reactivedb;MODE=PostgreSQL;DB_CLOSE_DELAY=-1;DATABASE_TO_UPPER=FALSE"
    user = "sa"
    password = ""
    
    # Connection Pool settings
    numThreads = 10
    maxConnections = 10
    minConnections = 1
  }
}

# Evolutions
play.evolutions {
  enabled = true
  autoApply = true
  autoApplyDowns = false
}

# Desactivar DBModule (JDBC) ya que usamos solo Slick
play.modules.disabled += "play.api.db.DBModule"

# Para producción, cambiar a PostgreSQL:
# slick.dbs.default {
#   profile = "slick.jdbc.PostgresProfile$"
#   db {
#     driver = "org.postgresql.Driver"
#     url = "jdbc:postgresql://localhost:5432/reactive_manifesto"
#     user = "postgres"
#     password = "password"
#   }
# }


play.filters.hosts {
  allowed = [
    "reactive-manifiesto.onrender.com",
    "localhost",
    "127.0.0.1"
  ]
}

# Email Configuration
# ~~~~~
# Modo desarrollo: solo imprime códigos en logs (NO envía emails reales)
email.enabled = false

# Modo producción: envía emails reales
# email.enabled = true
email.smtp.host = "smtp.gmail.com"
email.smtp.port = 587
email.smtp.user = ${?EMAIL_USER}
email.smtp.password = ${?EMAIL_PASSWORD}
email.from = ${?EMAIL_USER}
email.fromName = "Reactive Manifesto"

# Para usar Gmail:
# 1. Habilita la verificación en 2 pasos en tu cuenta de Google
# 2. Genera una "Contraseña de aplicación" en https://myaccount.google.com/apppasswords
# 3. Define las variables de entorno EMAIL_USER y EMAIL_PASSWORD
# 4. Cambia email.enabled a true